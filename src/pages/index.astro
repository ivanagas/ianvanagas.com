---
import { getCollection } from 'astro:content';
import MainLayout from '../layouts/MainLayout.astro';
import Parser from 'rss-parser';

let posts = await getCollection('post');
posts = posts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

const parser = new Parser();
const ianvFeed = await parser.parseURL('https://ianv.substack.com/feed');
const ianvPosts = (ianvFeed.items || []).map(item => ({
    title: item.title,
    date: item.pubDate ? new Date(item.pubDate) : new Date(),
    url: item.link,
    source: 'ianv-substack'
}));

const smartYoungBCFeed = await parser.parseURL('https://smartyoungbc.substack.com/feed');
const smartYoungBCPosts = (smartYoungBCFeed.items || []).map(item => ({
  title: item.title,
  date: item.pubDate ? new Date(item.pubDate) : new Date(),
  url: item.link,
  source: 'smartyoungbc'
}));

// Only returns the latest 20 posts
const productForEngineersFeed = await parser.parseURL('https://newsletter.posthog.com/feed');
const productForEngineersPosts = (productForEngineersFeed.items || [])
  .filter(item => {
    const creator = item.creator || item['dc:creator'];
    return creator === 'Ian Vanagas';
  })
  .map(item => ({
    title: item.title,
    date: item.pubDate ? new Date(item.pubDate) : new Date(),
    url: item.link,
    source: 'productforengineers'
  }));

const posthogFeed = await parser.parseURL('https://posthog.com/rss.xml');
const posthogPosts = (posthogFeed.items || [])
  .filter(item => {
    const creator = item.creator || item['dc:creator'];
    return creator === 'Ian Vanagas';
  })
  .map(item => ({
    title: item.title,
    date: item.pubDate ? new Date(item.pubDate) : new Date(),
    url: item.link,
    source: 'posthog'
  }));

const localPosts = posts.map(post => ({
	title: post.data.title,
	date: post.data.date,
	url: `/posts/${post.id}`,
	source: 'local'
}));

// Combine all posts and sort by date
const personalPosts = [...localPosts, ...ianvPosts, ...smartYoungBCPosts]
	.sort((a, b) => b.date.getTime() - a.date.getTime())
	.slice(0, 10);

const workPosts = [...productForEngineersPosts, ...posthogPosts]
	.sort((a, b) => b.date.getTime() - a.date.getTime())
	.slice(0, 10);

const randomPosts = [...personalPosts, ...workPosts]
	.sort(() => Math.random() - 0.5)
	.slice(0, 10);
---

<MainLayout title="Home">
<h1>Hi, I'm Ian</h1>
<p>I'm a writer and software developer. I currently work as a technical content marketer for <a href="https://posthog.com">PostHog</a>, a suite of tools to help developers build better products.</p>
<p>I write about startups, AI, the internet, writing, and more. I wrote <a href="https://www.smartyoungbc.com/">Smart Young BC</a>.</p>

<div style="display: flex; justify-content: center;">
	<p><a href="/projects">Projects</a> - <a href="mailto:ianvanagas@gmail.com">Email me</a> - <a href="https://twitter.com/IanVanagas">Twitter</a> - <a href="/reading-list">Reading list</a> - <a href="https://hevy.com/user/ianvan">Hevy</a> - <a href="https://strava.app.link/OoJfsGjGvNb">Strava</a></p>
</div>

<div style="display: flex; flex-direction: column; align-items: center;">
	<h3>Get my latest writing via email:</h3>
	<iframe src="https://ianv.substack.com/embed" width="480" height="150" style="border:1px solid #2c4967; border-radius: 8px;" frameborder="0" scrolling="no"></iframe>
</div>

<div class="home-posts-grid">
	<div>
		<h2>Personal Posts</h2>
		<ul>
		{personalPosts.map((post) => (
				<li>
						<a href={post.url} target={post.source !== 'local' ? "_blank" : undefined} rel={post.source !== 'local' ? "noopener noreferrer" : undefined}>
								{post.title}
						</a>
				</li>
		))}
		</ul>
	</div>
	<div>
		<h2>Work Posts</h2>
		<ul>
			{workPosts.map((post) => (
				<li>
						<a href={post.url} target={post.source !== 'local' ? "_blank" : undefined} rel={post.source !== 'local' ? "noopener noreferrer" : undefined}>
								{post.title}
						</a>
				</li>
		))}
		</ul>
	</div>
	<div>
		<h2>Popular</h2>
		<ul>
			{/* 
				View counts (as of Feb 2025):
				1. how-discord-won: 42,478
				2. clubhouse-is-a-cargo-cult: 9,237
				3. always-be-collecting-dots: 979
				4. Smart Young BC: 834
				5. tiktok-making-copying-easy: 740
				6. unbundling-youtube: 734
				7. Where are all the banger blog posts?: 476
				8. tiktoks-viral-video-growth-machine: 475
				9. offensive-defensive-community-onboarding: 467
				10. content-about-creation-is-procrastination: 438
			*/}
			<li><a href="/posts/how-discord-won">How Discord Won</a></li>
			<li><a href="/posts/clubhouse-is-a-cargo-cult">Clubhouse Is a Cargo Cult</a></li>
			<li><a href="/posts/always-be-collecting-dots">How to Be a Better Listener: Always Be Collecting Dots</a></li>
			<li><a href="https://www.smartyoungbc.com/" target="_blank" rel="noopener noreferrer">Smart Young BC: A Vision for the Future of BC</a></li>
			<li><a href="/posts/tiktok-making-copying-easy">TikTok Succeeds by Making Copying Easy</a></li>
			<li><a href="/posts/unbundling-youtube">Unbundling YouTube</a></li>
			<li><a href="https://ianv.substack.com/p/where-are-all-the-banger-blog-posts" target="_blank" rel="noopener noreferrer">Where are all the banger blog posts?</a></li>
			<li><a href="/posts/tiktoks-viral-video-growth-machine">TikTok's Viral Video Growth Machine</a></li>
			<li><a href="/posts/offensive-defensive-community-onboarding">Offensive & Defensive Community Onboarding</a></li>
			<li><a href="/posts/content-about-creation-is-procrastination">Content About Creation is Procrastination</a></li>
		</ul>
	</div>
	<div>
		<h2>Random</h2>
		<ul>
			{randomPosts.map((post) => (
				<li>
						<a href={post.url} target={post.source !== 'local' ? "_blank" : undefined} rel={post.source !== 'local' ? "noopener noreferrer" : undefined}>
								{post.title}
						</a>
					</li>
			))}
		</ul>
	</div>
</div>
<div>
	<h2>Interests (AKA areas I'm learning about)</h2>
	<ul>
		<li><strong>Using LLMs to become more effective.</strong> LLMs suck at a lot of things, but if you hold this frame, you miss out on all the good they can do. What are all the ways LLMs (and agents) can help me live a better, more effective life?</li>
		<li><strong>An internet-native life.</strong> I have lived nearly my whole life on the internet. I can thank the internet for my wife, job, hobbies, and friends. How do I continue to make the most of it without getting sucked into the negative bits?</li>
		<li><strong>The history of startups.</strong> The “startup” industry has gone through distinct phases like the dot-com crash, web 2.0, cloud, app economy, blitzscaling, ZIRP, AI boom, and more. This history is understudied as a collection. What lessons and mistakes can we learn from it?</li>
		<li><strong>How to build a successful product.</strong> So much of product building advice is either rigid product development frameworks or super high-level VC truisms. There is tons of info between these two waiting to be discovered.</li>
		<li><strong>How to scale a successful startup.</strong> There are a lot of products that have a burst of success but they get stuck when trying to grow. One-off growth strategies are temporary. How do you create sustainable growth and a successful company?</li>
		<li><strong>Writing for the internet.</strong> Writing for the internet is a distinct genre. It needs to compete with the ability to click away at any moment. How do you entertain, inform, teach, and share through writing? What is good writing anyway? How do I become a prolific writer?</li>
		<li><strong>Marketing on the internet.</strong> The internet is the best marketing channel ever. There are endless new ways to reach the people you want to reach, share information with them, and persuade. Doing this effectively is a constant challenge.</li>
		<li><strong>Modern China.</strong> The amount I know about China is disproportionately low for how important and interesting it is. How did it grow so fast? How does their economy and political system work? What can the West learn from them?</li>
		<li><strong>Classic literature.</strong> These are the source code for society. By reading and thinking about them, you are entering an intergenerational discussion about what it means to be human, how to live, and everything else you would want to know.</li>
		<li><strong>Cities as talent.</strong> Cities are the people who live there. How do you attract the best people to your city? How do you empower them to do great things? How does brain drain, immigration, housing, and quality of life affect this?</li>
		<li><strong>Where to live.</strong> Why do people live where they live? Where should I live? Why do people move? How do we make the places we live better?</li>
		<li><strong>Language learning.</strong> I am learning Portuguese. I have learned a bit of Spanish. I plan on becoming fluent in both. How do I do this most effectively? Right now, it seems just like input (preferably comprehensible) over a long period of time. If this is the case, how do I maintain motivation?</li>
		<li><strong>Agency.</strong> How do I become more agentic? How do I more effectively get things done in the world?</li>
		<li><strong>How to be a good person.</strong> Interacting with other people is a core human experience. It's something you can do all the time and brings the greatest joy when done right. Some people are incredible at it. I want to be like those people.</li>
	</ul>
	<p>If you're reading this, I'd love to talk with you about any of these. I'd gladly take your advice and recommendations here too. <a href="mailto:ianvanagas@gmail.com">Email me</a>.</p>
</div>
</MainLayout>